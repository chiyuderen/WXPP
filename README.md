# WXPP

# 小程序踩的坑

## 分享图尺寸
> 由于安卓和苹果的分享图尺寸不统一 目前测试下来 <font color='#ff6600'>**分享图尺寸： 500x391**</font>

## Date
> 在使用new Date()的时候 里面的参数 格式 <font color='#ff6600'>**2018/02/09 23:59:59**</font> 不能使用 <font color='#ff6600'>**2018-02-09 23:59:59**</font> 否则会出现获取不到时间的问题

## Canvas
> Canvas如果宽度不是100% 一定要给TA一个样式 <font color='#ff6600'>**text-align: left**</font> 否则Canvas内部的元素会继承父容器的对齐方式

##
> Canvas drawImage不支持base64 目前支持两种方式

    * 在小程序文件目录的图片
    * 在小程序安全域名下的图片 通过wx.downloadFile下载远程文件到本地

## wx.canvasToTempFilePath
> 在小程序开启调试模式的时候 有一定概率触发fail 导致转换本地临时路径文件失败 (正式情况不会存在)

## wx.getLocation
> 在使用wx.getLocation获取用户地理位置时 在某些安卓手机（oppo R11）设置微信当前地理位置的权限状态为：<font color='#ff6600'>**“询问”**</font>，小程序将无法获取到手机的地理位置，就算用户允许获取也拿不到，除非将手机的微信地理位置权限修改为<font color='#ff6600'>**“允许”**</font>状态

## 动态生成的二维码

> 动态生成二维码跳转到指定小程序页面有以下几点需要注意

    * 动态二维码需要后端来生成
    * 动态二维码识别后的页面只能是小程序的默认首页 并且参数也只能在默认首页的onload方法里面获取
    * 动态二维码携带的页面参数最大32个可见字符 因此建议通过一个唯一id来存储获取分享的数据 保证页面参数最小化

## 文本换行
> 目前只有<font color='#ff6600'>**text**</font>标签支持换行操作 写法：
```
<text>第一行\n第二行</text>
```
